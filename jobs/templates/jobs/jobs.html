{% extends 'jobs/base.html' %}
{% load static %}

{% block title %}Find Jobs - JobPortal{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/Jobs.css' %}">
{% endblock %}

{% block content %}
<div class="jobs-container">
    <div class="filters-sidebar">
        <div class="filter-section">
            <h3>Job Type</h3>
            <div class="filter-options">
                {% for type in job_types %}
                <label class="filter-option">
                    <input type="checkbox" name="job_type" value="{{ type.id }}">
                    <span>{{ type.name }}</span>
                </label>
                {% endfor %}
            </div>
        </div>

        <div class="filter-section">
            <h3>Experience Level</h3>
            <div class="filter-options">
                {% for level in experience_levels %}
                <label class="filter-option">
                    <input type="checkbox" name="experience" value="{{ level.id }}">
                    <span>{{ level.name }}</span>
                </label>
                {% endfor %}
            </div>
        </div>

        <div class="filter-section">
            <h3>Salary Range</h3>
            <div class="filter-options">
                {% for range in salary_ranges %}
                <label class="filter-option">
                    <input type="checkbox" name="salary" value="{{ range.id }}">
                    <span>{{ range.name }}</span>
                </label>
                {% endfor %}
            </div>
        </div>

        <button class="apply-filters-btn">Apply Filters</button>
    </div>

    <div class="jobs-content">
        <div class="jobs-header">
            <h2>Available Jobs</h2>
            <div class="jobs-sort">
                <label for="sort-select">Sort by:</label>
                <select id="sort-select">
                    <option value="newest">Newest</option>
                    <option value="salary_high">Salary: High to Low</option>
                    <option value="salary_low">Salary: Low to High</option>
                </select>
            </div>
        </div>

        <div class="jobs-grid">
            {% for job in jobs %}
            <div class="job-card">
                <div class="job-header">
                    <h3>{{ job.title }}</h3>
                    <span class="company">{{ job.company }}</span>
                </div>
                <div class="job-details">
                    <span class="location">üìç {{ job.location }}</span>
                    <span class="salary">üí∞ {{ job.salary }}</span>
                    <span class="type">üìã {{ job.job_type }}</span>
                </div>
                <div class="job-description">
                    <p>{{ job.description|truncatewords:30 }}</p>
                </div>
                <div class="job-tags">
                    {% for tag in job.tags.all %}
                    <span class="tag">{{ tag.name }}</span>
                    {% endfor %}
                </div>
                <div class="job-footer">
                    <span class="posted-date">Posted {{ job.created_at|timesince }} ago</span>
                    <a href="{% url 'job_detail' job.id %}" class="view-job-btn">View Details</a>
                </div>
            </div>
            {% empty %}
            <div class="no-jobs">
                <p>No jobs found matching your criteria.</p>
            </div>
            {% endfor %}
        </div>

        {% if jobs.has_other_pages %}
        <div class="pagination">
            {% if jobs.has_previous %}
            <a href="?page={{ jobs.previous_page_number }}" class="page-link">&laquo; Previous</a>
            {% endif %}

            {% for num in jobs.paginator.page_range %}
            {% if jobs.number == num %}
            <span class="page-link active">{{ num }}</span>
            {% else %}
            <a href="?page={{ num }}" class="page-link">{{ num }}</a>
            {% endif %}
            {% endfor %}

            {% if jobs.has_next %}
            <a href="?page={{ jobs.next_page_number }}" class="page-link">Next &raquo;</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/pages/Jobs.js' %}"></script>
{% endblock %} 